---
sidebar: sidebar 
permalink: hu_windows_2012r2.html 
keywords: fcp, iscsi, windows, host, utilities, 2012, ontp, luns, configure 
summary: Installieren Sie Windows Host Utilities auf einem Windows Server 2012 R2-Host, um die FCP- und iSCSI-Protokollvorgänge mit ONTAP LUNs zu verwalten. 
---
= Konfigurieren von Windows Server 2012 R2 für FCP und iSCSI mit ONTAP -Speicher
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Mit den Windows Host Utilities können Sie Windows-Hosts mit virtuellen Datenträgern (LUNs) auf einem NetApp SAN verbinden.  Installieren Sie die Windows Host Utilities auf einem Windows Server 2012 R2-Host, um die FCP- und iSCSI-Protokollvorgänge mit ONTAP LUNs zu verwalten.



== Schritt 1: Aktivieren Sie optional den SAN-Bootvorgang

Sie können das Windows-Betriebssystem entweder lokal oder über ein SAN starten.  NetApp empfiehlt die Verwendung eines SAN-Bootvorgangs, um die Bereitstellung zu vereinfachen und die Skalierbarkeit zu verbessern.

[role="tabbed-block"]
====
.SAN Booting
--
Wenn Sie sich für den SAN-Bootvorgang entscheiden, muss dies von Ihrer Konfiguration unterstützt werden.

.Bevor Sie beginnen
Überprüfen Sie mithilfe des https://mysupport.netapp.com/matrix/#welcome["Interoperabilitäts-Matrix-Tool"^], ob Ihr Windows-Betriebssystem, Ihr Hostbusadapter (HBA), die HBA-Firmware, das HBA-StartBIOS und die ONTAP-Version das Booten über das SAN unterstützen.

.Schritte
. link:https://docs.netapp.com/us-en/ontap/san-management/index.html["Erstellen Sie eine SAN-Boot-LUN und ordnen Sie sie dem Host zu"^].
. Aktivieren Sie das SAN-Booten im Server-BIOS für die Ports, denen die SAN-Boot-LUN zugeordnet ist.
+
Informationen zum Aktivieren des HBA-BIOS finden Sie in der anbieterspezifischen Dokumentation.

. Überprüfen Sie, ob die Konfiguration erfolgreich war, indem Sie den Host neu starten und überprüfen, ob das Betriebssystem ausgeführt wird.


--
.Lokaler Start
--
Führen Sie einen lokalen Bootvorgang durch, indem Sie das Windows-Betriebssystem auf der lokalen Festplatte installieren, beispielsweise auf einer SSD, SATA oder einem RAID-System.

--
====


== Schritt 2: Windows-Hotfixes installieren

NetApp empfiehlt die Installation des *neuesten kumulativen Updates* aus dem Microsoft Update-Katalog auf dem Hostserver.

.Schritte
. Laden Sie die Hotfixes von der herunterlink:https://www.catalog.update.microsoft.com/Search.aspx?q=Update+Windows+Server+2012_R2["Microsoft Update Catalog 2012 R2"^].



NOTE: Wenden Sie sich an den Microsoft Support für die Hotfixes, die nicht im Microsoft Update Catalog heruntergeladen werden können.

. Befolgen Sie die Anweisungen von Microsoft zur Installation der Hotfixes.



TIP: Viele Hotfixes erfordern einen Neustart des Windows-Hosts.  Sie können mit dem Neustart des Hosts warten, bis Sie die Host-Dienstprogramme installiert oder aktualisiert haben.



== Schritt 3: Installieren Sie die Windows-Host-Dienstprogramme

Die Windows Host Utilities sind eine Reihe von Softwareprogrammen mit zugehöriger Dokumentation, die es Ihnen ermöglichen, Host-Computer mit virtuellen Datenträgern (LUNs) auf einem NetApp SAN zu verbinden.  NetApp empfiehlt, die neuesten Windows Host Utilities herunterzuladen und zu installieren, um die ONTAP LUN-Verwaltung zu unterstützen und dem technischen Support die Erfassung von Konfigurationsdaten zu erleichtern.

Informationen zur Konfiguration und Installation der Windows-Hostdienstprogramme finden Sie unterlink:https://docs.netapp.com/us-en/ontap-sanhost/hu_wuhu_71_rn.html["Windows Host Utilities"] Dokumentation und wählen Sie die Installationsprozedur für Ihre Windows Host Utilities-Version aus.



== Schritt 4: Bestätigen Sie die Multipath-Konfiguration für Ihren Host

Installieren Sie die Microsoft Multipath I/O (MPIO)-Software und aktivieren Sie Multipathing, wenn Ihr Windows-Host über mehr als einen Pfad zum Speichersystem verfügt.

Auf einem Windows-System sind die beiden Hauptkomponenten einer MPIO-Lösung das gerätespezifische Modul (DSM) und das Windows MPIO.  MPIO stellt dem Windows-Betriebssystem für alle Pfade eine einzige Festplatte zur Verfügung, und das DSM verwaltet die Pfad-Failover.


CAUTION: Wenn Sie die MPIO-Software nicht installieren, sieht das Windows-Betriebssystem jeden Pfad möglicherweise als separate Festplatte. Dies kann zu Datenbeschädigungen führen.


NOTE: Windows XP oder Windows Vista, die auf einer virtuellen Hyper-V-Maschine ausgeführt werden, unterstützt MPIO nicht.

.Schritte
. Installieren Sie die MPIO-Software und aktivieren Sie Multipathing.
. Wenn Sie MPIO auf Systemen auswählen, die FC verwenden, legt das Host Utilities Installer die erforderlichen Zeitüberschreitungswerte für Emulex und QLogic FC HBAs fest.
+
[role="tabbed-block"]
====
.Emulex FC
--
Die Zeitüberschreitungswerte für Emulex FC HBAs:

[cols="2*"]
|===
| Eigenschaftstyp | Eigenschaftswert 


| LinkTimeOut | 1 


| NodeTimeOut | 10 
|===
--
.QLogic FC
--
Die Zeitüberschreitungswerte für QLogic FC HBAs:

[cols="2*"]
|===
| Eigenschaftstyp | Eigenschaftswert 


| LinkDownTimeOut | 1 


| PortDownRetryCount | 10 
|===
--
====
. Überprüfen Sie den Pfadstatus für Ihre ONTAP LUNs:
+
Je nach SAN-Konfiguration verwendet der Host ASA, AFF oder FAS -Konfigurationen für den Zugriff auf ONTAP -LUNs.  Diese Konfigurationen sollten nicht mehr als vier Pfade benötigen, um auf eine einzelne ONTAP LUN zuzugreifen.  Bei einem Speicherausfall können mehr als vier Pfade Probleme verursachen.

+
Die folgenden Beispielausgaben zeigen die korrekten Einstellungen für ONTAP -LUNs für eine ASA, AFF oder FAS Konfiguration.

+
[role="tabbed-block"]
====
.ASA-Konfiguration
--
Eine ASA -Konfiguration sollte eine Gruppe von aktiven/optimierten Pfaden mit jeweils einer Priorität aufweisen.  Der Controller verwaltet die Pfade und sendet E/A-Operationen auf allen aktiven Pfaden.

image::asa.png[Screenshot der ONTAP-LUN mit aktiven/optimierten Pfaden]

--
.AFF- oder FAS-Konfiguration
--
Eine AFF oder FAS Konfiguration sollte zwei Pfadgruppen mit unterschiedlichen Prioritäten aufweisen.  Die Pfade mit höherer Priorität sind aktiv/optimiert und werden von dem Controller bedient, auf dem sich das Aggregat befindet.  Die Pfade mit niedrigerer Priorität werden von einem anderen Controller bedient.  Sie sind aktiv, aber nicht optimiert und werden nur dann verwendet, wenn optimierte Pfade nicht verfügbar sind.

image::nonasa.png[Screenshot einer ONTAP-LUN mit zwei aktiven/optimierten Pfaden und zwei aktiven/nicht optimierten Pfaden]

--
====




== Schritt 5: Bekannte Probleme überprüfen

Es sind keine Probleme bekannt.



== Was kommt als Nächstes?

link:hu_wuhu_hba_settings.html["Erfahren Sie mehr über die Registrierungseinstellungen für Windows Host Utilities."].
